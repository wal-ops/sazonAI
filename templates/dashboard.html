{% extends "base.html" %}

{% block title %}Dashboard de Recetas - SazonAI{% endblock %}

{% block content %}
<h2>Todas las Recetas</h2>
<div class="recipe-grid">
    <!-- Iteramos sobre la lista de recetas pasada desde Python -->
    {% for recipe in recipes %}
    <div class="recipe-card">
        <div class="recipe-card-content">
            <a href="{{ url_for('recipes.view_recipe', id=recipe.id) }}" style="text-decoration: none;">
                <h3>{{ recipe.nombre }}</h3>
            </a>
            <p class="author">Por: {{ recipe.autor if recipe.autor else 'Usuario Desconocido' }}</p>
            <p>{{ recipe.descripcion[:100] }}...</p> <!-- Muestra los primeros 100 caracteres -->
        </div>
        <div class="recipe-card-actions">
            <!-- Enlaces para Editar y un formulario para Borrar -->
            <a href="{{ url_for('recipes.edit_recipe', id=recipe.id) }}" class="btn btn-secondary">Editar</a>
            <form action="{{ url_for('recipes.delete_recipe', id=recipe.id) }}" method="POST" style="display: inline;"
                onsubmit="return confirm('¿Estás seguro de que quieres eliminar esta receta?');">
                <button type="submit" class="btn btn-danger">Borrar</button>
            </form>
        </div>
    </div>
    {% else %}
    <p>No hay recetas todavía. ¡Añade la primera!</p>
    {% endfor %}
</div>
{% endblock %}